CREATE SCHEMA IF NOT EXISTS request_schema;

-- Таблица заявок на участие
CREATE TABLE IF NOT EXISTS request_schema.participation_requests
(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    event_id BIGINT NOT NULL,
    requester_id BIGINT NOT NULL,
    status VARCHAR(50) NOT NULL
    );

-- Индексы
CREATE INDEX IF NOT EXISTS idx_requests_event_id ON request_schema.participation_requests(event_id);
CREATE INDEX IF NOT EXISTS idx_requests_requester_id ON request_schema.participation_requests(requester_id);
CREATE INDEX IF NOT EXISTS idx_requests_status ON request_schema.participation_requests(status);
CREATE UNIQUE INDEX IF NOT EXISTS idx_requests_requester_event ON request_schema.participation_requests(requester_id, event_id);